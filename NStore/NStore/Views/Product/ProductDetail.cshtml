@model NStore.Models.CustomProduct

@{
    ViewBag.Title = "Chi Tiết Sản Phẩm";

}

<main class="main">
    <div class="page-content">
        <div class="product-details-top">
            <div class="bg-light pb-5 mb-4">
                <nav aria-label="breadcrumb" class="breadcrumb-nav border-0 mb-0">
                    <div class="container d-flex align-items-center">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="@Url.Action("Index", "Home")">Trang Chủ</a></li>
                            <li class="breadcrumb-item"><a href="@Url.Action("Index", "Product")">Sản Phẩm</a></li>
                            <li class="breadcrumb-item active" aria-current="page">@Model.sanpham.DanhMuc.tenDanhMuc</li>
                        </ol>
                    </div><!-- End .container -->
                </nav><!-- End .breadcrumb-nav -->
                <div class="container">
                    <div class="product-gallery-carousel owl-carousel owl-full owl-nav-dark">
                        @foreach (var item in Model.sanpham.SanPhamImage)
                        {

                            <figure class="product-gallery-image">
                                <img src="~/assets/images/products/@item.img" alt="product image">
                            </figure><!-- End .product-gallery-image -->
                        }


                    </div><!-- End .owl-carousel -->
                </div><!-- End .container -->
            </div><!-- End .bg-light pb-5 -->

            <div class="product-details product-details-centered product-details-separator">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6">
                            <h1 class="product-title">@Model.sanpham.tenSanPham</h1><!-- End .product-title -->
                            <div class="product-price">
                                $@Model.sanpham.donGia
                            </div><!-- End .product-price -->

                        </div><!-- End .col-md-6 -->

                        <div class="col-md-6">
                            <div class="product-details-action">
                                <div class="details-action-col">
                                    <div class="product-details-quantity">
                                        <input type="number" id="qty" class="form-control" value="1" min="1" max="10" step="1" data-decimals="0" required>
                                    </div><!-- End .product-details-quantity -->

                                    <button onclick="AddToCartClick(@Model.sanpham.id)" class="btn-product btn-cart"><span>Thêm Vào Giỏ Hàng</span></button>
                                </div><!-- End .details-action-col -->

                                <div class="details-action-wrapper adding_wishlist" id="@Model.sanpham.id">
                                    <a class="btn-product btn-wishlist" title="Wishlist"><span>Thêm vào danh sách ưa thích</span></a>

                                </div><!-- End .details-action-wrapper -->
                            </div><!-- End .product-details-action -->

                            <div class="product-details-footer details-footer-col">
                                <div class="product-cat">
                                    <span>Danh mục:</span>
                                    <a href="#">@Model.sanpham.DanhMuc.tenDanhMuc</a>,
                                    <a href="#">@Model.sanpham.DanhMuc.NhomDanhMuc.tenNhomDanhMuc</a>,

                                </div><!-- End .product-cat -->

                                <div class="social-icons social-icons-sm">
                                    <span class="social-label">Chia sẻ:</span>
                                    <a class="social-icon" title="Facebook" target="_blank"><i class="icon-facebook-f"></i></a>
                                    <a class="social-icon" title="Twitter" target="_blank"><i class="icon-twitter"></i></a>
                                    <a class="social-icon" title="Instagram" target="_blank"><i class="icon-instagram"></i></a>
                                    <a class="social-icon" title="Pinterest" target="_blank"><i class="icon-pinterest"></i></a>
                                </div>
                            </div><!-- End .product-details-footer -->
                        </div><!-- End .col-md-6 -->
                    </div><!-- End .row -->
                </div><!-- End .container -->
            </div><!-- End .product-details -->
        </div><!-- End .product-details-top -->

        <div class="container">
            <div class="product-details-tab">
                <ul class="nav nav-pills justify-content-center" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="product-desc-link" data-toggle="tab" href="#product-desc-tab" role="tab" aria-controls="product-desc-tab" aria-selected="true">Mô tả</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="product-info-link" data-toggle="tab" href="#product-info-tab" role="tab" aria-controls="product-info-tab" aria-selected="false">Thông tin thêm</a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="product-desc-tab" role="tabpanel" aria-labelledby="product-desc-link">
                        <div class="product-desc-content">
                            <h3>Thông tin sản phẩm</h3>
                            <p>@Model.sanpham.mota</p>
                        </div><!-- End .product-desc-content -->
                    </div><!-- .End .tab-pane -->
                    <div class="tab-pane fade" id="product-info-tab" role="tabpanel" aria-labelledby="product-info-link">
                        <div class="product-desc-content">
                            <h3>Information</h3>
                            <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros. Nullam malesuada erat ut turpis. Suspendisse urna viverra non, semper suscipit, posuere a, pede. Donec nec justo eget felis facilisis fermentum. Aliquam porttitor mauris sit amet orci. </p>

                            <h3>Fabric & care</h3>
                            <ul>
                                <li>Faux suede fabric</li>
                                <li>Gold tone metal hoop handles.</li>
                                <li>RI branding</li>
                                <li>Snake print trim interior </li>
                                <li>Adjustable cross body strap</li>
                                <li> Height: 31cm; Width: 32cm; Depth: 12cm; Handle Drop: 61cm</li>
                            </ul>

                            <h3>Size</h3>
                            <p>one size</p>
                        </div><!-- End .product-desc-content -->
                    </div><!-- .End .tab-pane -->

                </div><!-- End .tab-content -->
            </div><!-- End .product-details-tab -->
        </div><!-- End .container -->

        <div class="container">
            <h2 class="title text-center mb-4">Có thể bạn cũng thích</h2><!-- End .title text-center -->
            <div class="owl-carousel owl-simple carousel-equal-height carousel-with-shadow" data-toggle="owl"
                 data-owl-options='{
                            "nav": false,
                            "dots": true,
                            "margin": 20,
                            "loop": false,
                            "responsive": {
                                "0": {
                                    "items":1
                                },
                                "480": {
                                    "items":2
                                },
                                "768": {
                                    "items":3
                                },
                                "992": {
                                    "items":4
                                },
                                "1200": {
                                    "items":4,
                                    "nav": true,
                                    "dots": false
                                }
                            }
                        }'>
                @foreach (var item in Model.list_sanpham)
                {
                    <div class="product text-center">
                        <figure class="product-media">
                            @if (item.soLuongTon == 0)
                            {
                                <span class="product-label label-out">Đang hết hàng</span>
                            }
                            @if (item.giamGia > 0)
                            {
                                <span class="product-label label-sale">@item.giamGia% Giảm</span>
                            }
                            <a href="@Url.Action("ProductDetail", "Product", new { id = item.id })">
                                <img src="~/assets/images/products/@item.img" alt="Product image" class="product-image">
                            </a>

                            <div class="product-action-vertical adding_wishlist" id="@item.id">
                                <a class="btn-product-icon btn-wishlist btn-expandable"><span>Thêm vào yêu thích</span></a>
                            </div><!-- End .product-action-vertical -->

                            <div class="product-action">
                                <button onclick="AddToCartClick(@item.id)" class="btn-product btn-cart"><span>Thêm Vào Giỏ Hàng</span></button>
                            </div><!-- End .product-action -->
                        </figure><!-- End .product-media -->

                        <div class="product-body">
                            <div class="product-cat">
                                <a href="@Url.Action("Index", "Product", new { category = item.idDanhMuc })">@item.DanhMuc.tenDanhMuc</a>
                            </div><!-- End .product-cat -->
                            <h3 class="product-title"><a href="@Url.Action("ProductDetail", "Product", new { id = item.id })">@item.tenSanPham</a></h3><!-- End .product-title -->
                            <div class="product-price">
                                @if (item.giamGia > 0)
                                {
                                    <span class="new-price">@Convert.ToInt32(item.donGia - (item.donGia * item.giamGia) / 100).ToString("c")</span>
                                    <span class="old-price">@Convert.ToInt32(item.donGia).ToString("c")</span>
                                }
                                else
                                {
                                    @Convert.ToInt32(item.donGia - (item.donGia * item.giamGia) / 100).ToString("c")
                                }
                            </div><!-- End .product-price -->
                        </div><!-- End .product-body -->
                    </div><!-- End .product -->
                }

            </div><!-- End .owl-carousel -->
        </div><!-- End .container -->
    </div><!-- End .page-content -->
</main><!-- End .main -->
@section scripts{

    <script>
        var menu = $(".main-nav")[0].querySelectorAll("li");
        menu.forEach((item) => {
            item.classList.remove("active");
        })
        menu[1].classList.add("active");

        $('.adding_wishlist').click(function () {
            var id_sanpham = $(this).attr('id');
            $.ajax({
                url: '/User/Adding_Wishlist',
                method: 'POST',
                data: { id_sanpham },
                success: function (rs) {
                    alert(rs)
                },
                error: function () {
                    alert("thất bại!")
                }
            })
        })

        //add product to cart
        function AddToCartClick(productId) {
            AddToCart(productId, 1, "add");
        }
    </script>
}